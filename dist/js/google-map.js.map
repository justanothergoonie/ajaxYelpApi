{"version":3,"sources":["google-map.js"],"names":["GoogleApi","google","maps","LatLngBounds","event","results","detail","console","log","m","business","businessMarker","lat","coordinates","latitude","lng","longitude","marker","Marker","position","map","title","name","loc","LatLng","contentString","rating","price","display_phone","location","display_address","infowindow","InfoWindow","content","markers","forEach","addListener","open","bounds","extend","push","fitBounds","panToBounds","setMap","setupMap","buttonEl","document","querySelector","addEventListener","clearMap","bodyEl","handleResults","circusLatLng","Map","getElementById","zoom","center","initMap"],"mappings":"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","sourcesContent":["class GoogleApi {\n\tmarkers = [];\n\tmap = null;\n\tbounds = new google.maps.LatLngBounds();\n\tconstructor() {\n\t\tthis.setupMap();\n\t\tconst buttonEl = document.querySelector('[name=\"search\"]');\n\t\tbuttonEl.addEventListener('click', this.clearMap);\n\t\tconst bodyEl = document.querySelector('body');\n\t\tbodyEl.addEventListener('got-results', this.handleResults);\n\t}\n\tsetupMap() {\n\t\tvar circusLatLng = { lat: 33.813242, lng: -84.361712 };\n\t\tthis.map = new google.maps.Map(document.getElementById('map'), {\n\t\t\tzoom: 12,\n\t\t\tcenter: circusLatLng,\n\t\t});\n\n\t\t// this.markers.push(marker);\n\t}\n\thandleResults = (event) => {\n\t\tconst results = event.detail;\n\t\tconsole.log('showing results from map', results);\n\n\t\tfor (let m in results) {\n\t\t\tconst business = results[m];\n\t\t\tconst businessMarker = {\n\t\t\t\tlat: business.coordinates.latitude,\n\t\t\t\tlng: business.coordinates.longitude,\n\t\t\t};\n\n\t\t\t// console.log(this.map);\n\n\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\tposition: businessMarker,\n\t\t\t\tmap: this.map,\n\t\t\t\ttitle: business.name,\n\t\t\t});\n\t\t\tvar loc = new google.maps.LatLng(\n\t\t\t\tmarker.position.lat(),\n\t\t\t\tmarker.position.lng()\n\t\t\t);\n\t\t\tvar contentString =\n\t\t\t\tbusiness.name +\n\t\t\t\t'<br/>' +\n\t\t\t\tbusiness.rating +\n\t\t\t\t' ‚≠ê' +\n\t\t\t\t'<br/>' +\n\t\t\t\tbusiness.price +\n\t\t\t\t'<br/>' +\n\t\t\t\tbusiness.display_phone +\n\t\t\t\t'<br/>' +\n\t\t\t\tbusiness.location.display_address;\n\t\t\t// console.log(contentString);\n\n\t\t\tvar infowindow = new google.maps.InfoWindow({\n\t\t\t\tcontent: contentString,\n\t\t\t});\n\t\t\tconsole.log(infowindow);\n\n\t\t\tthis.markers.forEach((marker) => {\n\t\t\t\tmarker.addListener('click', () => {\n\t\t\t\t\tinfowindow.open(this.map, marker);\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.bounds.extend(loc);\n\t\t\tthis.markers.push(marker);\n\t\t\tthis.map.fitBounds(this.bounds);\n\t\t\tthis.map.panToBounds(this.bounds);\n\t\t}\n\t};\n\tclearMap = () => {\n\t\tthis.markers.forEach((marker) => {\n\t\t\tmarker.setMap(null);\n\t\t});\n\t\tthis.markers = [];\n\t};\n}\nfunction initMap() {\n\tnew GoogleApi(document.getElementById('#map'));\n}\n"],"file":"google-map.js"}